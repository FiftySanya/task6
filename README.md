# Про помилки роботи з пам’яттю в FreeBSD та засоби їх усунення

---

## Завдання 1: Демонстрація проблеми неініціалізованого читання

### Опис
Ця програма демонструє проблему неініціалізованого читання в мові C, коли змінна використовується без попередньої ініціалізації, що призводить до невизначеної поведінки. MemorySanitizer (MSan) використовується для виявлення таких помилок під час виконання програми.

### Пояснення функціоналу програми
Програма створює локальну змінну `x` типу `int`, яка не ініціалізується. Потім значення `x` використовується для обчислення іншої змінної `y` шляхом додавання 1. Результат виводиться на екран. Оскільки `x` не ініціалізована, її значення є невизначеним, що може призвести до непередбачуваних результатів.

#### Кроки виконання програми:
- Оголошується змінна `x` без ініціалізації.
- Значення `x` зчитується для обчислення `y = x + 1`.
- Значення `y` виводиться за допомогою `printf`.

### Чому виникає проблема?
- Змінна `x` розташована на стеку, але не ініціалізована, тому її значення є "сміттям" (залишки даних у пам’яті).
- Читання неініціалізованого значення є невизначеною поведінкою в мові C, що може спричинити помилки або некоректну роботу програми.
- MemorySanitizer виявляє такі випадки, повідомляючи про використання неініціалізованих даних.

### Перевірка неініціалізованого читання з MemorySanitizer:
- **Команда компіляції**:
```bash
clang -fsanitize=memory -g -Wall -o task1 task1.c
```

- **Запуск програми**:
```bash
./task1
```

- **Очікуваний вивід MSan**:
```
==1074==WARNING: MemorySanitizer: use-of-uninitialized-value
    #0 0x2a95fe in main /root/tasks/task6/task1.c:6:5
    #1 0x800412c39 in __libc_start1 (/lib/libc.so.7+0x85c39)
    #2 0x2466cf in _start /usr/src/lib/csu/amd64/crt1_s.S:83

SUMMARY: MemorySanitizer: use-of-uninitialized-value /root/tasks/task6/task1.c:6:5 in main
Exiting
```

Звіт MSan вказує:
- Помилка сталася в рядку 6 файлу `task1.c`, де використано неініціалізоване значення `x`.
- Неініціалізована змінна `x` була створена в стеку в рядку 4.

### Як вирішити проблему?
Для усунення неініціалізованого читання необхідно:
- Ініціалізувати змінну `x` перед використанням, наприклад, `int x = 0;`.
- Використовувати інструменти статичного аналізу (наприклад, `-Wall` у `clang`) для виявлення таких помилок на етапі компіляції.
- Регулярно застосовувати MemorySanitizer для динамічного аналізу програм, особливо в складних системах.

### Висновок
Цей код демонструє небезпеку використання неініціалізованих змінних, що може призвести до невизначеної поведінки. MemorySanitizer є ефективним інструментом для виявлення таких помилок під час виконання, допомагаючи розробникам створювати надійніші програми. Використання MSan у поєднанні з попередженнями компілятора (наприклад, `-Wall`) значно підвищує якість коду.